---
title: 'Installation'
description: 'How to install Million.js into your React project'
---

import { Callout, Tabs, Tab, Steps } from 'nextra-theme-docs';

# å®‰è£…

Million.js å‡è®¾æ‚¨å·²ç»åˆå§‹åŒ–äº†ä¸€ä¸ª React é¡¹ç›®ã€‚å¦‚æœæ‚¨è¿˜æ²¡æœ‰ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨é¦–å…ˆæŸ¥çœ‹ [react.dev](https://react.dev)ã€‚

## å‡ ç§’é’Ÿå†…å®Œæˆè®¾ç½®

Million.js CLI å°†è‡ªåŠ¨å®‰è£…è¯¥åŒ…å¹¶ä¸ºæ‚¨é…ç½®æ‚¨çš„é¡¹ç›®ã€‚

<Tabs items={['npm', 'pnpm', 'yarn', 'bun']} storageKey="selected-pkg-manager">
  {/* prettier-ignore */}
  <Tab>
  ```bash copy
  npx million@latest
  ```
  </Tab>
  {/* prettier-ignore */}
  <Tab>
  ```bash copy
  pnpx million@latest
  ```
  </Tab>
  {/* prettier-ignore */}
  <Tab>
  ```bash copy
  yarn add million@latest
  ```
  </Tab>
  {/* prettier-ignore */}
  <Tab>
  ```bash copy
  bunx million@latest
  ```
  </Tab>
</Tabs>

å°±æ˜¯è¿™æ ·ï¼**æ‚¨çš„é¡¹ç›®ç°åœ¨æ­£åœ¨ Million.js ä¸Šè¿è¡Œ ğŸ‰**

<Callout type="info">
  Million.js ä¸ React 16 åŠæ›´é«˜ç‰ˆæœ¬å…¼å®¹ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯æ—§ç‰ˆæœ¬çš„ React, åˆ™éœ€è¦å…ˆå‡çº§ã€‚
</Callout>

## æ‰‹åŠ¨é…ç½®

å¦‚æœæ‚¨æƒ³æ›´ç²¾ç»†åœ°æ§åˆ¶å®‰è£…è¿‡ç¨‹ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚

<Tabs items={['Automatic', 'Manual']} storageKey="mode">

<Tab>

<Steps>

### å®‰è£…åŒ…

é¦–å…ˆï¼Œæ‚¨éœ€è¦å®‰è£… Million.jsã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ‚¨æœ€å–œæ¬¢çš„åŒ…ç®¡ç†å™¨æ¥æ‰§è¡Œæ­¤æ“ä½œ:

<Tabs items={['npm', 'pnpm', 'yarn', 'bun']} storageKey="selected-pkg-manager">
  {/* prettier-ignore */}
  <Tab>
  ```bash copy
  npm install million
  ```
  </Tab>
  {/* prettier-ignore */}
  <Tab>
  ```bash copy
  pnpm install million
  ```
  </Tab>
  {/* prettier-ignore */}
  <Tab>
  ```bash copy
  yarn add million
  ```
  </Tab>
  {/* prettier-ignore */}
  <Tab>
  ```bash copy
  bun add million
  ```
  </Tab>
</Tabs>

### ä½¿ç”¨ç¼–è¯‘å™¨

ç„¶åï¼Œå°†ç¼–è¯‘å™¨æ·»åŠ åˆ°æ‚¨é€‰æ‹©çš„æ„å»ºå·¥å…·ä¸­ï¼š

<Tabs items={['Next.js', 'Astro', 'Gatsby', 'Vite', 'Create React App', 'Webpack', 'Rollup']} storageKey="selected-bundler-compiler">
  <Tab>

  Million.js åœ¨ `/app` (ä»…â€œä½¿ç”¨å®¢æˆ·ç«¯â€ç»„ä»¶) å’Œ `/pages` ä¸­å—æ”¯æŒ

  ```js filename="next.config.mjs"
  import million from 'million/compiler';

  /** @type {import('next').NextConfig} */
  const nextConfig = {
    reactStrictMode: true,
  };

  const millionConfig = {
    auto: true,
    // if you're using RSC:
    // auto: { rsc: true },
  }

  export default million.next(nextConfig, millionConfig);
  ```
  </Tab>
  <Tab>
  ```js filename="astro.config.mjs"
  import { defineConfig } from 'astro/config';
  import million from 'million/compiler';

  export default defineConfig({
    vite: {
      plugins: [million.vite({ mode: 'react', server: true, auto: true })]
    }
  });
  ```
  </Tab>
  <Tab>
  ```js filename="gatsby-node.js"
  const million = require('million/compiler');

  exports.onCreateWebpackConfig = ({ actions }) => {
    actions.setWebpackConfig({
      plugins: [million.webpack({ mode: 'react', server: true, auto: true })],
    })
  }
  ```
  </Tab>
  <Tab>
  ```js filename="vite.config.js"
  import million from 'million/compiler';
  import react from "@vitejs/plugin-react";
  import { defineConfig } from 'vite';

  export default defineConfig({
    plugins: [million.vite({ auto: true }), react()],
  });
  ```
  </Tab>
  <Tab>
  ```js filename="craco.config.js"
  const million = require('million/compiler');
  module.exports = {
    webpack: {
      plugins: { add: [million.webpack({ auto: true })] }
    }
  };
  ```
  </Tab>
  <Tab>
  ```js filename="webpack.config.js"
  const million = require('million/compiler');
  module.exports = {
    plugins: [
      million.webpack({ auto: true }),
    ],
  }
  ```
  </Tab>
  <Tab>
  ```js filename="rollup.config.js"
  import million from 'million/compiler';

  export default {
    plugins: [million.rollup({ auto: true })],
  };
  ```
  </Tab>
</Tabs>

</Steps>

</Tab>

<Tab>

<Steps>

### Install package

First things first, you'll need to install Million.js. You can do this with your favorite package manager:

<Tabs items={['npm', 'pnpm', 'yarn', 'bun']} storageKey="selected-pkg-manager">
  {/* prettier-ignore */}
  <Tab>
  ```bash copy
  npm install million
  ```
  </Tab>
  {/* prettier-ignore */}
  <Tab>
  ```bash copy
  pnpm install million
  ```
  </Tab>
  {/* prettier-ignore */}
  <Tab>
  ```bash copy
  yarn add million
  ```
  </Tab>
  {/* prettier-ignore */}
  <Tab>
  ```bash copy
  bun add million
  ```
  </Tab>
</Tabs>

### Use the compiler

Then, add the compiler to your build tool of choice:

<details open>
  <summary>React Instructions</summary>
  <Tabs items={['Next.js', 'Astro', 'Gatsby', 'Vite', 'Create React App', 'Webpack', 'Rollup']} storageKey="selected-bundler-compiler">
    <Tab>
    Million.js is supported within the `/app` ("use client" components only) and `/pages`

    ```js filename="next.config.mjs"
    import million from 'million/compiler';

    /** @type {import('next').NextConfig} */
    const nextConfig = {
      reactStrictMode: true,
    };

    export default million.next(nextConfig);
    ```
    </Tab>
    <Tab>
    ```js filename="astro.config.mjs"
    import { defineConfig } from 'astro/config';
    import million from 'million/compiler';

    export default defineConfig({
      vite: {
        plugins: [million.vite({ mode: 'react', server: true })]
      }
    });
    ```
    </Tab>
    <Tab>
    ```js filename="gatsby-node.js"
    const million = require('million/compiler');

    exports.onCreateWebpackConfig = ({ actions }) => {
      actions.setWebpackConfig({
        plugins: [million.webpack({ mode: 'react', server: true })],
      })
    }
    ```
    </Tab>
    <Tab>
    ```js filename="vite.config.js"
    import million from 'million/compiler';
    import react from "@vitejs/plugin-react";
    import { defineConfig } from 'vite';

    export default defineConfig({
      plugins: [million.vite(), react()],
    });
    ```
    </Tab>
    <Tab>
    ```js filename="craco.config.js"
    const million = require('million/compiler');
    module.exports = {
      webpack: {
        plugins: { add: [million.webpack()] }
      }
    };
    ```
    </Tab>
    <Tab>
    ```js filename="webpack.config.js"
    const million = require('million/compiler');
    module.exports = {
      plugins: [
        million.webpack(),
      ],
    }
    ```
    </Tab>
    <Tab>
    ```js filename="rollup.config.js"
    import million from 'million/compiler';

    export default {
      plugins: [million.rollup()],
    };
    ```
    </Tab>
  </Tabs>
</details>

<details>
  <summary>Preact Instructions</summary>

  <Callout type="info">
    Note that instead of importing from `million/react` in your application code, you'll need to import from `million/preact` instead.
  </Callout>

  <Tabs items={['Astro', 'Vite', 'Webpack', 'Rollup']} storageKey="selected-bundler-compiler-preact">
    <Tab>
    ```js filename="astro.config.mjs"
    import { defineConfig } from 'astro/config';
    import million from 'million/compiler';

    export default defineConfig({
      vite: {
        plugins: [million.vite({ mode: 'preact', server: true })]
      }
    });
    ```
    </Tab>
    <Tab>
    ```js filename="vite.config.js"
    import million from 'million/compiler';
    import { defineConfig } from 'vite';

    export default defineConfig({
      plugins: [million.vite({ mode: 'preact' })],
    });
    ```
    </Tab>
    <Tab>
    ```js filename="webpack.config.js"
    const million = require('million/compiler');
    module.exports = {
      plugins: [
        million.webpack({ mode: 'preact' }),
      ],
    }
    ```
    </Tab>
    <Tab>
    ```js filename="rollup.config.js"
    import million from 'million/compiler';

    export default {
      plugins: [million.rollup({ mode: 'preact' })],
    };
    ```
    </Tab>
  </Tabs>
</details>

### Using the experimental Optimizer

<Callout type="warning">
 This is a _**highly experimental**_ feature. It's not recommended to use this in production.
</Callout>

You can enable the experimental optimizer by passing `optimize: true{:js}` to the compiler options. This will allow the server to attempt to statically analyze blocks beforehand for a zero initialization cost.

You can also add a leading comment of `/* @optimize */` to any block to opt-in to optimization on a component-by-component basis.

```js {3}
import { block } from "million/react";

const AppBlock = /* @optimize */ block(App);
```

</Steps>

</Tab>

</Tabs>
